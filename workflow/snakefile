import subprocess
from pathlib import Path

configfile: "workflow/config/config.yaml"

reference_fasta = Path(config['ref_fna']).name
ref_base = Path(reference_fasta).with_suffix('')
main_dir = "results"

wildcard_constraints:
    SRR = r"[R-S0-9]{10}"

include: "rules/alignment.smk"
include: "rules/ref_processing.smk"
include: "rules/haplotype_caller.smk"

rule all:
    input:
        variants_haplotype_caller = "results/SRR3722033/call_variants_via_haplotype_caller/variants.vcf",
        variants_M2 = "results/SRR3722033/gen_mutect2_vcfs/variants.vcf",
        filtered_vcf = "results/SRR3722033/gen_filtered_vcfs/filtered.vcf"